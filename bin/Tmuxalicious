#!/bin/bash

if [ $# == 0 ]; then
   echo "I need an environment buddy."
fi

sessionName=$HOSTNAME"-"$1
`tmux has -t $sessionName` 
blah=$?
if [ $blah  -eq 0 ]; then
    read -p "Session exists. Attach? " REPLY
    if [[ $REPLY =~ ^[Yy]$ ]]
    then
        tmux -2 attach-session -t $sessionName
        exit 0
    fi
fi


tmux new-session -d -s $sessionName

tmux rename-window -t $sessionName:0 'General' 
tmux new-window -t $sessionName:1 -n 'HOME' 

case $1 in
    ENV1)
        cd /path/to/dir/
        tmux new-window -t $sessionName:2 -n 'ENV1NAME1' 
        cd /path/to/dir/
        tmux new-window -t $sessionName:3 -n 'ENV1NAME2' 
    ;;
    
    ENV2)
        cd /path/to/dir/
        tmux new-window -t $sessionName:2 -n 'ENV2NAME1' 
    ;;
    
    ENV3)
        cd /path/to/dir/
        tmux new-window -t $sessionName:2 -n 'ENV3NAME1' 
        cd /path/to/dir/
        tmux new-window -t $sessionName:3 -n 'ENV3NAME1' 
        cd /path/to/dir/
        tmux new-window -t $sessionName:4 -n 'ENV3NAME1' 
    ;;
esac

tmux select-window -t $sessionName:1
tmux -2 attach-session -t $sessionName
